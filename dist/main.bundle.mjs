(()=>{"use strict";var e,t={2605:(e,t,n)=>{var o=n(3281);const r=document.querySelector("#userEmail"),s=document.querySelector("#userPassword"),i=document.querySelector("#lnDiv"),a=document.querySelector("#fnDiv"),c=document.querySelector("#lName"),l=document.querySelector("#fName"),d=document.querySelector("#btnChangePwd"),u=document.querySelector("#new_pwd"),y=document.querySelector("#new_pwd_rpt"),p=document.querySelector("#btnBack"),g=document.querySelector("#btnLogin"),m=(document.querySelector("#btnLogout"),document.getElementById("login")),f=document.getElementById("update-pwd"),w=document.querySelector("#divLoginError"),v=document.querySelector("#lblLoginErrorMessage"),S=document.querySelector("#divPwdError"),h=document.querySelector("#pwdErr"),k=document.querySelector("#btnSignup"),b=document.querySelector("#showSignup"),E=document.querySelector("#rptPwdDiv"),L=document.querySelector("#userPasswordRpt"),q=()=>{"index.html"!=window.location.pathname.split("/").pop()&&(window.location.href="./index.html")},I=()=>{"index.html"==window.location.pathname.split("/").pop()&&(window.location.href="./profile.html")},P=e=>{console.log("error :>> ",e),console.log("error.code :>> ",e.code),w.style.display="block",e.code==o.kq.INVALID_PASSWORD?v.innerHTML="Wrong password":"success"==sessionStorage.changePwd?v.innerHTML=e:e.code==o.kq.INVALID_EMAIL?v.innerHTML="Enter generic username like yourname123, no @ signs.":v.innerHTML=`Error: ${e}`},O=e=>{S.style.display="block",h.innerHTML=`Error: ${e}`};-1!==navigator.userAgent.indexOf("Mobile")||-1!==navigator.userAgent.indexOf("iPhone")||-1!==navigator.userAgent.indexOf("Android")||navigator.userAgent.indexOf("Windows Phone");var x=n(3977),M=n(8679);const N=(0,x.ZF)({apiKey:"AIzaSyC8J8_Bo2YSeM1aTkE3--bQLCaeuGU3hQE",authDomain:"cfpicks-66e14.firebaseapp.com",projectId:"cfpicks-66e14",databaseURL:"https://cfpicks-66e14-default-rtdb.firebaseio.com",storageBucket:"cfpicks-66e14.appspot.com",messagingSenderId:"924459609957",appId:"1:924459609957:web:c1125a2a8f5147de313b8c"}),A=(0,o.v0)(N),T=(0,M.N8)(N);async function D(e,t){localStorage.setItem("uid",e.uid);const n=e.displayName??t??"";localStorage.setItem("displayName",n),sessionStorage.setItem("changePwd","false")}async function H(){const e=j();if(!1===e)return;const t=s.value;try{const n=await async function(e,t){return(await(0,o.e5)(A,e,t)).user}(e,t);D(n),I()}catch(e){P(e.message??String(e))}}async function _(){if(u.value!==y.value)return O("Passwords do not match");try{await async function(e){const t=A.currentUser;if(!t)throw new Error("No user is currently signed in.");return await(0,o.gQ)(t,e),"ok"}(u.value),sessionStorage.setItem("changePwd","success"),window.location.href="./index.html"}catch(e){O(e.message??String(e))}}function j(){let e=r.value.trim();return e.includes(" ")||s.value.includes(" ")?(P("No spaces"),!1):(e.endsWith("@cml.com")||(e=`${e}@cml.com`),e)}function C(){sessionStorage.setItem("loginState","login"),k.style.display="none",g.style.display="block",b.textContent="Sign Up",E.style.display="none",a.style.display="none",i.style.display="none",q()}function $(){sessionStorage.setItem("loginState","signup"),k.style.display="block",g.style.display="none",b.textContent="Login",E.style.display="block",a.style.display="block",i.style.display="block",q()}window.onload=function(){S.style.display="none",h.innerHTML="",w.style.display="none",v.innerHTML="",function(){const e=sessionStorage.getItem("changePwd"),t=sessionStorage.getItem("loginState")??"login";"true"===e?(f.style.display="block",m.style.display="none"):"success"===e?(f.style.display="none",m.style.display="block",P("Please login back in with new password")):(f.style.display="none",m.style.display="block"),"signup"===t?$():C(),g.addEventListener("click",H),k.addEventListener("click",(()=>async function(e){const t=j();if(!1===t)return;const n=s.value;if(n!==e)return P("Passwords do not match");if(!l.value.trim()||!c.value.trim())return P("Enter name");const r=`${l.value.trim()} ${c.value.trim()}`;try{const e=await async function(e,t){return(await(0,o.Xb)(A,e,t)).user}(t,n);await async function(e,t){return await(0,o.ck)(e,{displayName:t}),await(0,o.H5)(e),e.displayName}(e,r);let s=await async function(e,t){return await(0,M.t8)((0,M.iH)(T,`users/${e}`),{name:t,week1:{}}),"ok"}(e.uid,r);console.log("name :>> ",r),console.log("res :>> ",s),await D(e,r),I()}catch(e){P(e.message??String(e))}}(L.value))),d.addEventListener("click",_),p.addEventListener("click",(()=>{window.location.href="./profile.html",sessionStorage.setItem("changePwd","false")})),b.addEventListener("click",(()=>{"signup"===sessionStorage.getItem("loginState")?C():$()})),m.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),"signup"===(sessionStorage.getItem("loginState")??"login")?k.click():g.click())})),f.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),d.click())}))}()}}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,n,r,s)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,r,s]=e[d],a=!0,c=0;c<n.length;c++)(!1&s||i>=s)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(a=!1,s<i&&(i=s));if(a){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,r,s]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,s,[i,a,c]=n,l=0;if(i.some((t=>0!==e[t]))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(c)var d=c(o)}for(t&&t(n);l<i.length;l++)s=i[l],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},n=self.webpackChunkprod_1=self.webpackChunkprod_1||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[529,283],(()=>o(2605)));r=o.O(r)})();