(()=>{"use strict";var e,o={2605:(e,o,n)=>{var t=n(3281);const r=document.querySelector("#userEmail"),s=document.querySelector("#userPassword"),l=document.querySelector("#lnDiv"),i=document.querySelector("#fnDiv"),a=document.querySelector("#lName"),c=document.querySelector("#fName"),d=document.querySelector("#btnChangePwd"),u=document.querySelector("#new_pwd"),g=document.querySelector("#new_pwd_rpt"),p=document.querySelector("#btnBack"),y=document.querySelector("#btnLogin"),w=(document.querySelector("#btnLogout"),document.getElementById("login")),m=document.getElementById("update-pwd"),S=document.querySelector("#divLoginError"),h=document.querySelector("#lblLoginErrorMessage"),v=document.querySelector("#divPwdError"),f=document.querySelector("#pwdErr"),k=document.querySelector("#btnSignup"),b=document.querySelector("#showSignup"),E=document.querySelector("#rptPwdDiv"),L=document.querySelector("#userPasswordRpt"),q=()=>{"index.html"==window.location.pathname.split("/").pop()&&(window.location.href="./master.html")},P=e=>{console.log("error :>> ",e),console.log("error.code :>> ",e.code),S.style.display="block",e.code==t.kq.INVALID_PASSWORD?h.innerHTML="Wrong password":"success"==sessionStorage.changePwd?h.innerHTML=e:e.code==t.kq.INVALID_EMAIL?h.innerHTML="Enter generic username like yourname123, no @ signs.":h.innerHTML=`Error: ${e}`};-1!==navigator.userAgent.indexOf("Mobile")||-1!==navigator.userAgent.indexOf("iPhone")||-1!==navigator.userAgent.indexOf("Android")||navigator.userAgent.indexOf("Windows Phone");var O=n(3977),x=n(8679);const N=(0,O.ZF)({apiKey:"AIzaSyC8J8_Bo2YSeM1aTkE3--bQLCaeuGU3hQE",authDomain:"cfpicks-66e14.firebaseapp.com",projectId:"cfpicks-66e14",storageBucket:"cfpicks-66e14.appspot.com",messagingSenderId:"924459609957",appId:"1:924459609957:web:c1125a2a8f5147de313b8c"}),A=(0,t.v0)(N),I=(0,x.N8)(),M=(e,o,n)=>{localStorage.uid=e.uid,localStorage.displayName=null==e.displayName?o:e.displayName,sessionStorage.changePwd=!1,sessionStorage.ddd=n},C=async()=>{var e,o;(e=D(),o=s.value,(0,t.e5)(A,e,o)).then((e=>{console.log("userCredential :>> ",e),M(e.user),q()})).catch((e=>{console.log("err :>> ",e),P(e)}))},T=async()=>{if(u.value!==g.value)return"Passwords do not match",v.style.display="block",void(f.innerHTML="Error: Passwords do not match");(e=>{const o=A.currentUser;return o?(0,t.gQ)(o,e):Promise.reject(new Error("No user is currently signed in."))})(u.value).then((()=>{sessionStorage.changePwd="success",window.location.href="./index.html"})).catch((e=>{console.log("err :>> ",e)}))},D=()=>{let e=r.value;return e.includes(" ")||s.value.includes(" ")?(P("No spaces"),!1):("@cml.com"!=e.substring(e.length-8)&&(e=`${e}@cml.com`),e)};function j(){sessionStorage.loginState="login",k.style.display="none",y.style.display="block",b.textContent="Sign Up",E.style.display="none",i.style.display="none",l.style.display="none"}function H(){sessionStorage.loginState="signup",k.style.display="block",y.style.display="none",b.textContent="Login",E.style.display="block",i.style.display="block",l.style.display="block"}window.onload=(A.onAuthStateChanged((e=>{if(e)console.log("user mon :>> ",e),localStorage.uid=e.uid,"index.html"==window.location.pathname.split("/").pop()&&(window.location.href="./profile.html");else{const e=window.location.pathname.split("/").pop();if(console.log("currPage :>> ",e),"index.html"!=e){window.location.replace("index.html");const e=window.history.state;window.history.replaceState(e,"",window.location.href),window.onpopstate=function(){window.history.replaceState(e,"",window.location.href)}}}})),v.style.display="none",f.innerHTML="",S.style.display="none",h.innerHTML="",void(()=>{const e=sessionStorage.changePwd,o=null==sessionStorage.loginState?"login":sessionStorage.loginState;console.log("loginState :>> ",o),"true"==e?(m.style.display="block",w.style.display="none"):"success"==e?(m.style.display="none",w.style.display="block",P("Please login back in with new password")):(m.style.display="none",w.style.display="block"),"signup"==o?H():j(),y.addEventListener("click",C),k.addEventListener("click",(function(){(async e=>{let o=D();if(console.log("cleanUid :>> ",o),!1===o)return;const n=s.value;if(n!==e)return void P("Passwords do not match");if(""==c.value&""==a.value)return void P("Enter name");let r=`${c.value} ${a.value} `;console.log("name :>> ",r),((e,o)=>(0,t.Xb)(A,e,o))(o,n).then((e=>{var o;o=r,(0,t.ck)(A.currentUser,{displayName:o}).then((()=>{console.log("userCredential.user.displayName :>> ",A.currentUser.displayName)})).catch((e=>{console.log("error :>> ",e)})),M(e.user,r,n),((e,o)=>{console.log("indb :>> "),(0,x.t8)((0,x.iH)(I,`users/${e}/`),{name:o,week1:{}})})(e.user.uid,r),q()})).catch((e=>P(e)))})(L.value)})),d.addEventListener("click",T),p.addEventListener("click",(()=>{window.location.href="./profile.html",sessionStorage.changePwd=!1})),b.addEventListener("click",(()=>{"signup"==sessionStorage.loginState?(sessionStorage.loginState="login",j()):(sessionStorage.loginState="signup",H())})),w.addEventListener("keydown",(function(e){"Enter"===e.key&&(console.log("enter"),e.preventDefault(),console.log("sessionStorage.loginState :>> ",sessionStorage.loginState),"signup"==sessionStorage.loginState||null==sessionStorage.loginState?k.click():y.click())})),m.addEventListener("keydown",(function(e){"Enter"==e.key&&(e.preventDefault(),d.click())}))})())}},n={};function t(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}};return o[e](s,s.exports,t),s.exports}t.m=o,e=[],t.O=(o,n,r,s)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,r,s]=e[d],i=!0,a=0;a<n.length;a++)(!1&s||l>=s)&&Object.keys(t.O).every((e=>t.O[e](n[a])))?n.splice(a--,1):(i=!1,s<l&&(l=s));if(i){e.splice(d--,1);var c=r();void 0!==c&&(o=c)}}return o}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,r,s]},t.d=(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={179:0};t.O.j=o=>0===e[o];var o=(o,n)=>{var r,s,[l,i,a]=n,c=0;if(l.some((o=>0!==e[o]))){for(r in i)t.o(i,r)&&(t.m[r]=i[r]);if(a)var d=a(t)}for(o&&o(n);c<l.length;c++)s=l[c],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(d)},n=self.webpackChunkprod_1=self.webpackChunkprod_1||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))})();var r=t.O(void 0,[529,283],(()=>t(2605)));r=t.O(r)})();